<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DITranquillity  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="DITranquillity  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">DITranquillity 4.1.1 Docs</a> (90% documented)</p>
        <p class="header-right"><a href="https://github.com/ivlevAstef/DITranquillity"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://https%3A%2F%2Fgithub.com%2FivlevAstef%2FDITranquillity%2Fcode%2Fdocsets%2FDITranquillity.xml"><img src="img/dash.png"/>Install in Dash</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">DITranquillity Reference</a>
        <img id="carat" src="img/carat.png" />
        DITranquillity  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity5DIArgC">DIArg</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIArgumentVertex.html">DIArgumentVertex</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity7DIByTagC">DIByTag</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DICacheStorage.html">DICacheStorage</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIComponentBuilder.html">DIComponentBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIComponentVertex.html">DIComponentVertex</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DICompositeStorage.html">DICompositeStorage</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIContainer.html">DIContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIEdge.html">DIEdge</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIExtensions.html">DIExtensions</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity6DIManyC">DIMany</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity17DIManyInFrameworkC">DIManyInFramework</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIScope.html">DIScope</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIStoryboard.html">DIStoryboard</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DIUnknownVertex.html">DIUnknownVertex</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity11InternalArgC">InternalArg</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity14InternalByManyC">InternalByMany</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity25InternalByManyInFrameworkC">InternalByManyInFramework</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:14DITranquillity13InternalByTagC">InternalByTag</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/ComponentAlternativeType.html">ComponentAlternativeType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DIComponentPriority.html">DIComponentPriority</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DILifeTime.html">DILifeTime</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DILifeTime/ReferenceCounting.html">– ReferenceCounting</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DILogLevel.html">DILogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DIVertex.html">DIVertex</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Lazy.html">Lazy</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Provider.html">Provider</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Provider1.html">Provider1</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Provider2.html">Provider2</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Provider3.html">Provider3</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Provider4.html">Provider4</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Provider5.html">Provider5</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity1mopyxAA11DIContainerClF">*(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity3argyxAA5DIArgCyxGlF">arg(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity2by3tag2onq_xm_AA7DIByTagCyxq_Gtr0_lF">by(tag:on:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity2by4tags__2onq1_xm_q_mq0_mAA7DIByTagCyxAFyq_AFyq0_q1_GGGtr2_lF">by(tags:_:_:on:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity2by4tags_2onq0_xm_q_mAA7DIByTagCyxAFyq_q0_GGtr1_lF">by(tags:_:on:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity4manyySayxGAA6DIManyCyxGlF">many(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:14DITranquillity15manyInFrameworkySayxGAA06DIManycD0CyxGlF">manyInFramework(_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/DIFramework.html">DIFramework</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DIPart.html">DIPart</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DIStorage.html">DIStorage</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/DIComponentInfo.html">DIComponentInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DICycle.html">DICycle</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DIGraph.html">DIGraph</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DISetting.html">DISetting</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DISetting/Defaults.html">– Defaults</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DISetting/Log.html">– Log</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:14DITranquillity7DIATypea">DIAType</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:14DITranquillity9DILogFunca">DILogFunc</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:14DITranquillity5DITaga">DITag</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p align="center">
<img src ="https://habrastorage.org/files/c6d/c89/5d0/c6dc895d02324b96bc679f41228ab6bf.png" alt="Tranquillity"/>
</p>

<p align="center">
<a href="http://cocoapods.org/pods/DITranquillity"><img src ="https://img.shields.io/cocoapods/v/DITranquillity.svg?style=flat"/></a>
<a href="https://github.com/Carthage/Carthage"><img src ="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat"/></a>
<a href="https://swift.org/package-manager"><img src ="https://img.shields.io/badge/SwiftPM-compatible-4BC51D.svg?style=flat"/></a>
<a href="https://travis-ci.org/ivlevAstef/DITranquillity"><img src ="https://travis-ci.org/ivlevAstef/DITranquillity.svg?tag=v4.1.0"/></a>
<a href="https://github.com/ivlevAstef/DITranquillity/blob/master/LICENSE"><img src ="https://img.shields.io/github/license/ivlevAstef/DITranquillity.svg?maxAge=2592000"/></a>
<a href="https://developer.apple.com/swift"><img src ="https://img.shields.io/badge/Swift-3.0--5.3-F16D39.svg?style=flat"/></a>
<a href="http://cocoapods.org/pods/DITranquillity"><img src ="https://img.shields.io/badge/platform-iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20watchOS%20%7C%20Linux-lightgrey.svg"/></a>
<a href="https://codecov.io/gh/ivlevAstef/DITranquillity"><img src ="https://codecov.io/gh/ivlevAstef/DITranquillity/branch/master/graph/badge.svg"/></a>
</p>
<h1 id='ditranquillity' class='heading'>DITranquillity</h1>

<p>Tranquillity is a lightweight but powerful <a href="https://en.wikipedia.org/wiki/Dependency_injection">dependency injection</a> library for swift.</p>

<p>The name &ldquo;Tranquillity&rdquo; laid the foundation in the basic principles of library: clarity, simplicity and security.</p>

<p>It says - use the library and you will be calm for your dependencies.</p>

<blockquote>
<p>Language switch: <a href="README.md">English</a>, <a href="README_ru.md">Russian</a></p>
</blockquote>
<h2 id='about-dependendy-injection' class='heading'>About Dependendy Injection</h2>

<p>Dependency Injections is a software design pattern in which someone delivers dependencies to an object.</p>

<p>Is one form of the broader technique of <a href="https://en.wikipedia.org/wiki/Inversion_of_control">Inversion Of Control</a> and help the <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">Dependency Inversion Principle</a></p>

<p><a href="Documentation/en/about_dependency_injection.md">For more details you can read this link</a></p>

<p>Also I recommend you to read <a href="Documentation/en/glossary.md">Glossary</a> which will help to better understand the terms. </p>
<h2 id='features' class='heading'>Features</h2>
<h4 id='core' class='heading'>Core</h4>

<ul>
<li>[x] <a href="Documentation/en/core/registration_and_service.md">Registration components and services</a></li>
<li>[x] <a href="Documentation/en/core/injection.md">Initializer/Property/Method Injections</a></li>
<li>[x] <a href="Documentation/en/core/modificated_injection.md">Optional and argument, many, by tag Injections</a></li>
<li>[x] <a href="Documentation/en/core/delayed_injection.md">Delayed injection</a></li>
<li>[x] <a href="Documentation/en/core/injection.md">Circular dependency injection</a></li>
<li>[x] <a href="Documentation/en/core/scope_and_lifetime.md">Scope and lifetime</a></li>
<li>[x] <a href="Documentation/en/core/modular.md">Modular</a></li>
<li>[x] <a href="Documentation/en/core/logs.md">Details logs</a></li>
<li>[x] Thread safety</li>
<li>[x] <a href="Documentation/en/core/container_hierarchy.md">Container hierarchy</a>
#### UI</li>
<li>[x] <a href="Documentation/en/ui/storyboard.md">Storyboard and StoryboardReferences</a></li>
<li>[x] <a href="Documentation/en/ui/view_injection.md">Simple subviews and Cells Injection</a>
#### Graph API</li>
<li>[x ] <a href="Documentation/en/graph/get_graph.md">Get dependency graph</a></li>
<li>[x] <a href="Documentation/en/graph/graph_validation.md">Graph Validation</a></li>
<li>[ ] <a href="Documentation/en/graph/visualization_graph.md">Visualization dependency graph</a></li>
</ul>
<h2 id='installing' class='heading'>Installing</h2>

<p>The library supports three popular package managers: Cocoapods, Carthage, SwiftPM.</p>
<h4 id='cocoapods' class='heading'>CocoaPods</h4>

<p>Add the following lines to your <code>Podfile</code>: </p>
<pre class="highlight plaintext"><code>pod 'DITranquillity'
</code></pre>
<h4 id='swiftpm' class='heading'>SwiftPM</h4>

<p>You can use &ldquo;Xcode/File/Swift Packages/Add Package Dependency&hellip;&rdquo; and write github url:</p>
<pre class="highlight plaintext"><code>https://github.com/ivlevAstef/DITranquillity
</code></pre>

<p>Also you can edit your <code>Package.swift</code> and the following line into section <code>dependencies</code>:</p>
<pre class="highlight plaintext"><code>.package(url: "https://github.com/ivlevAstef/DITranquillity.git", from: "3.8.4")
</code></pre>

<p>And don&rsquo;t forget to specify in your section <code>target</code> wrote dependency line:</p>
<pre class="highlight plaintext"><code>.product(name: "DITranquillity")
</code></pre>

<blockquote>
<p>Attention! - SwiftPM unsupport features from the &ldquo;UI&rdquo; section.</p>
</blockquote>
<h4 id='carthage' class='heading'>Carthage</h4>

<p>Add the following lines to your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "ivlevAstef/DITranquillity"
</code></pre>

<p>Carthage support &ldquo;UI&rdquo; and &ldquo;GraphAPI&rdquo; section no additional actions.</p>
<h2 id='usage' class='heading'>Usage</h2>

<p>The library uses a declarative style of dependency description, and allows you to separate your application code from dependency description code.</p>

<p>For a quick entry, let&rsquo;s look at an example code of one simplified VIPER screen:</p>
<pre class="highlight plaintext"><code>.................................................
/// Dependency description

let container = DIContainer()

container.register(LoginRouter.init)

container.register(LoginPresenterImpl.init)
  .as(LoginPresenter.self)
  .lifetime(.objectGraph)

container.register(LoginViewController.init)
  .injection(cycle: true, \.presenter)
  .as(LoginView.self)
  .lifetime(.objectGraph)

container.register(AuthInteractorImpl.init)
  .as(AuthInteractor.self)

.................................................
/// Application start point

let router: LoginRouter = container.resolve()
window.rootViewController = router.rootViewController
router.start()

.................................................
/// Application Code

import SwiftLazy

class LoginRouter {
    let rootViewController = UINavigationController()
    private let loginPresenterProvider: Provider&lt;LoginPresenter&gt;

    init(loginPresenterProvider: Provider&lt;LoginPresenter&gt;) {
        loginPresenterProvider = loginPresenterProvider
    }

    func start() {
        let presenter = loginPresenterProvider.value
        presenter.loginSuccessCallback = { [weak self] _ in
            ...
        }
        // Your can write code without force cast, it's code simple example
        rootViewController.push(presenter.view as! UIViewController)
    }
}

protocol LoginPresenter: class {
    var loginSuccessCallback: ((_ userId: String) -&gt; Void)?
    func login(name: String, password: String)
}

protocol LoginView: class {
    func showError(text: String)
}

class LoginPresenterImpl: LoginPresenter {
    private weak var view: LoginView?
    private let authInteractor: AuthInteractor
    init(view: LoginView, authInteractor: AuthInteractor) {
        self.view = view
        self.authInteractor = authInteractor
    }

    func login(name: String, password: String) {
        if name.isEmpty || password.isEmpty {
            view?.showError(text: "fill input")
            return
        }

        authInteractor.login(name: name, password: password, completion: { [weak self] result in
            switch result {
            case .failure(let error): 
                self?.view?.showError(text: "\(error)")
            case .success(let userId):
                self?.loginSuccessCallback?(userId)
            }
        })
    }
}

class LoginViewController: UIViewController, LoginView {
    var presenter: LoginPresenter!
    ...
    func showError(text: String) {
        showAlert(title: "Error", message: text)
    }

    private func tapOnLoginButton() {
        presenter.login(name: nameTextField.text ?? "", password: passwordTextField.text ?? "")
    }
}

protocol AuthInteractor: class {
    func login(name: String, password: String, completion: (Result&lt;String, Error&gt;) -&gt; Void)
}

class AuthInteractorImpl: AuthInteractor {
    func login(name: String, password: String, completion: (Result&lt;String, Error&gt;) -&gt; Void) {
        ...
    }
}
</code></pre>

<p>As you can see, the dependency description code takes a small part, and the application code doen&rsquo;t know about how dependencies are implemented.  </p>

<p>Also your can show samples:</p>

<ul>
<li><a href="Samples/SampleHabr/">For habr</a></li>
<li><a href="Samples/SampleChaos/">Chaos</a></li>
<li><a href="Samples/SampleDelegateAndObserver/">Delegate and observer</a></li>
</ul>

<p>Also your can read articles:</p>

<ul>
<li>Ru! <a href="https://habr.com/ru/post/457188/">https://habr.com/ru/post/457188/</a></li>
<li>Ru! Old! <a href="https://habr.com/ru/post/311334/">https://habr.com/ru/post/311334/</a></li>
</ul>
<h2 id='requirements' class='heading'>Requirements</h2>

<p>iOS 8.0+,macOS 10.10+,tvOS 9.0+, watchOS, linux; ARC</p>

<ul>
<li>Swift 5.0-5.3: Xcode 10.2-12; version &gt;= 3.6.3</li>
<li>Swift 4.2: Xcode 10; version &gt;= 3.4.3</li>
<li>Swift 4.1: Xcode 9.3; version &gt;= 3.2.3</li>
<li>Swift 4.0: Xcode 9.0; version &gt;= 3.0.5</li>
<li>Swift 3.0-3.2: Xcode 8.0-9.0; 0.9.5 &lt;= version &lt; 3.7.0</li>
<li>Swift 2.3: Xcode 7.0; version &lt; 0.9.5</li>
</ul>
<h2 id='changelog' class='heading'>Changelog</h2>

<p>See <a href="CHANGELOG.md">CHANGELOG</a> file or <a href="https://github.com/ivlevAstef/DITranquillity/releases">releases</a>.</p>
<h2 id='history-and-plans' class='heading'>History and Plans</h2>

<ul>
<li>[x] v1.x.x - Started</li>
<li>[x] v2.x.x - Stabilization</li>
<li>[x]  v3.x.x - Evolution and Features</li>
<li>[ ] v4.x.x - Graph API and Optimization. Also Documentation and Marketing</li>
<li>[ ]  v5.x.x - Pre compile time validation</li>
</ul>
<h2 id='feedback' class='heading'>Feedback</h2>
<h3 id='i-39-ve-found-a-bug-or-have-a-feature-request' class='heading'>I&rsquo;ve found a bug, or have a feature request</h3>

<p>Please raise a <a href="https://github.com/ivlevAstef/DITranquillity/issues">GitHub issue</a>.</p>
<h3 id='i-39-ve-found-a-defect-in-documentation-or-thought-up-how-to-improve-it' class='heading'>I&rsquo;ve found a defect in documentation, or thought up how to improve it</h3>

<p>Please help library development and create <a href="https://github.com/ivlevAstef/DITranquillity/pulls">pull requests</a></p>
<h3 id='plea' class='heading'>Plea</h3>

<p>If you like my library, then support the library by putting star.</p>

<p>You can also support the author of the library with a donation:</p>

<p><a href="https://www.paypal.me/ivlevAstef"><img src="https://img.shields.io/badge/Donate-PayPal-green.svg" alt="Donate"></a></p>
<h3 id='question' class='heading'>Question?</h3>

<p>You can feel free to ask the question at e-mail: <a href="mailto:ivlev.stef@gmail.com">ivlev.stef@gmail.com</a>.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="https://github.com/ivlevAstef" target="_blank" rel="external">Ivlev</a>. All rights reserved. (Last updated: 2020-09-05)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
